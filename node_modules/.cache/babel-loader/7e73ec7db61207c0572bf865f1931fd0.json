{"ast":null,"code":"\"use strict\";\n\nvar clc = require(\"cli-color\");\n\nvar fs = require(\"fs\");\n\nvar homeDir = require(\"os\").homedir();\n\nvar path = require(\"path\");\n\nvar _require = require(\"../command\"),\n    Command = _require.Command;\n\nvar Config = require(\"../config\");\n\nvar fsutils = require(\"../fsutils\");\n\nvar init = require(\"../init\");\n\nvar logger = require(\"../logger\");\n\nvar _require2 = require(\"../prompt\"),\n    prompt = _require2.prompt,\n    promptOnce = _require2.promptOnce;\n\nvar requireAuth = require(\"../requireAuth\");\n\nvar utils = require(\"../utils\");\n\nvar TEMPLATE_ROOT = path.resolve(__dirname, \"../../templates/\");\nvar BANNER_TEXT = fs.readFileSync(path.join(TEMPLATE_ROOT, \"banner.txt\"), \"utf8\");\nvar GITIGNORE_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"_gitignore\"), \"utf8\");\n\nvar _isOutside = function (from, to) {\n  return path.relative(from, to).match(/^\\.\\./);\n};\n\nmodule.exports = new Command(\"init [feature]\").description(\"setup a Firebase project in the current directory\").before(requireAuth).action(function (feature, options) {\n  var cwd = options.cwd || process.cwd();\n  var warnings = [];\n  var warningText = \"\";\n\n  if (_isOutside(homeDir, cwd)) {\n    warnings.push(\"You are currently outside your home directory\");\n  }\n\n  if (cwd === homeDir) {\n    warnings.push(\"You are initializing your home directory as a Firebase project\");\n  }\n\n  var config = Config.load(options, true);\n  var existingConfig = !!config;\n\n  if (!existingConfig) {\n    config = new Config({}, {\n      projectDir: cwd,\n      cwd: cwd\n    });\n  } else {\n    warnings.push(\"You are initializing in an existing Firebase project directory\");\n  }\n\n  if (warnings.length) {\n    warningText = \"\\nBefore we get started, keep in mind:\\n\\n  \" + clc.yellow.bold(\"* \") + warnings.join(\"\\n  \" + clc.yellow.bold(\"* \")) + \"\\n\";\n  }\n\n  logger.info(clc.yellow.bold(BANNER_TEXT) + \"\\nYou're about to initialize a Firebase project in this directory:\\n\\n  \" + clc.bold(config.projectDir) + \"\\n\" + warningText);\n  var setup = {\n    config: config._src,\n    rcfile: config.readProjectFile(\".firebaserc\", {\n      json: true,\n      fallback: {}\n    })\n  };\n  var choices = [{\n    value: \"database\",\n    name: \"Database: Deploy Firebase Realtime Database Rules\",\n    checked: false\n  }, {\n    value: \"firestore\",\n    name: \"Firestore: Deploy rules and create indexes for Firestore\",\n    checked: false\n  }, {\n    value: \"functions\",\n    name: \"Functions: Configure and deploy Cloud Functions\",\n    checked: false\n  }, {\n    value: \"hosting\",\n    name: \"Hosting: Configure and deploy Firebase Hosting sites\",\n    checked: false\n  }, {\n    value: \"storage\",\n    name: \"Storage: Deploy Cloud Storage security rules\",\n    checked: false\n  }, {\n    value: \"emulators\",\n    name: \"Emulators: Set up local emulators for Firebase features\",\n    checked: false\n  }];\n  var next;\n\n  if (process.platform === \"win32\") {\n    next = promptOnce({\n      type: \"confirm\",\n      message: \"Are you ready to proceed?\"\n    });\n  } else {\n    next = Promise.resolve(true);\n  }\n\n  return next.then(function (proceed) {\n    if (!proceed) {\n      return utils.reject(\"Aborted by user.\", {\n        exit: 1\n      });\n    }\n\n    if (feature) {\n      setup.featureArg = true;\n      setup.features = [feature];\n      return undefined;\n    }\n\n    return prompt(setup, [{\n      type: \"checkbox\",\n      name: \"features\",\n      message: \"Which Firebase CLI features do you want to set up for this folder? \" + \"Press Space to select features, then Enter to confirm your choices.\",\n      choices: choices\n    }]);\n  }).then(function () {\n    if (setup.features.length === 0) {\n      return utils.reject(\"Must select at least one feature. Use \" + clc.bold.underline(\"SPACEBAR\") + \" to select features, or provide a feature with \" + clc.bold(\"firebase init [feature_name]\"));\n    }\n\n    setup.features.unshift(\"project\");\n    return init(setup, config, options);\n  }).then(function () {\n    logger.info();\n    utils.logBullet(\"Writing configuration info to \" + clc.bold(\"firebase.json\") + \"...\");\n    config.writeProjectFile(\"firebase.json\", setup.config);\n    utils.logBullet(\"Writing project information to \" + clc.bold(\".firebaserc\") + \"...\");\n    config.writeProjectFile(\".firebaserc\", setup.rcfile);\n\n    if (!fsutils.fileExistsSync(config.path(\".gitignore\"))) {\n      utils.logBullet(\"Writing gitignore file to \" + clc.bold(\".gitignore\") + \"...\");\n      config.writeProjectFile(\".gitignore\", GITIGNORE_TEMPLATE);\n    }\n\n    logger.info();\n    utils.logSuccess(\"Firebase initialization complete!\");\n  });\n});","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/lib/commands/init.js"],"names":["clc","require","fs","homeDir","homedir","path","Command","Config","fsutils","init","logger","prompt","promptOnce","requireAuth","utils","TEMPLATE_ROOT","resolve","__dirname","BANNER_TEXT","readFileSync","join","GITIGNORE_TEMPLATE","_isOutside","from","to","relative","match","module","exports","description","before","action","feature","options","cwd","process","warnings","warningText","push","config","load","existingConfig","projectDir","length","yellow","bold","info","setup","_src","rcfile","readProjectFile","json","fallback","choices","value","name","checked","next","platform","type","message","Promise","then","proceed","reject","exit","featureArg","features","undefined","underline","unshift","logBullet","writeProjectFile","fileExistsSync","logSuccess"],"mappings":"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","sourcesContent":["\"use strict\";\nvar clc = require(\"cli-color\");\nvar fs = require(\"fs\");\nvar homeDir = require(\"os\").homedir();\nvar path = require(\"path\");\nvar { Command } = require(\"../command\");\nvar Config = require(\"../config\");\nvar fsutils = require(\"../fsutils\");\nvar init = require(\"../init\");\nvar logger = require(\"../logger\");\nvar { prompt, promptOnce } = require(\"../prompt\");\nvar requireAuth = require(\"../requireAuth\");\nvar utils = require(\"../utils\");\nvar TEMPLATE_ROOT = path.resolve(__dirname, \"../../templates/\");\nvar BANNER_TEXT = fs.readFileSync(path.join(TEMPLATE_ROOT, \"banner.txt\"), \"utf8\");\nvar GITIGNORE_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"_gitignore\"), \"utf8\");\nvar _isOutside = function (from, to) {\n    return path.relative(from, to).match(/^\\.\\./);\n};\nmodule.exports = new Command(\"init [feature]\")\n    .description(\"setup a Firebase project in the current directory\")\n    .before(requireAuth)\n    .action(function (feature, options) {\n    var cwd = options.cwd || process.cwd();\n    var warnings = [];\n    var warningText = \"\";\n    if (_isOutside(homeDir, cwd)) {\n        warnings.push(\"You are currently outside your home directory\");\n    }\n    if (cwd === homeDir) {\n        warnings.push(\"You are initializing your home directory as a Firebase project\");\n    }\n    var config = Config.load(options, true);\n    var existingConfig = !!config;\n    if (!existingConfig) {\n        config = new Config({}, { projectDir: cwd, cwd: cwd });\n    }\n    else {\n        warnings.push(\"You are initializing in an existing Firebase project directory\");\n    }\n    if (warnings.length) {\n        warningText =\n            \"\\nBefore we get started, keep in mind:\\n\\n  \" +\n                clc.yellow.bold(\"* \") +\n                warnings.join(\"\\n  \" + clc.yellow.bold(\"* \")) +\n                \"\\n\";\n    }\n    logger.info(clc.yellow.bold(BANNER_TEXT) +\n        \"\\nYou're about to initialize a Firebase project in this directory:\\n\\n  \" +\n        clc.bold(config.projectDir) +\n        \"\\n\" +\n        warningText);\n    var setup = {\n        config: config._src,\n        rcfile: config.readProjectFile(\".firebaserc\", {\n            json: true,\n            fallback: {},\n        }),\n    };\n    var choices = [\n        {\n            value: \"database\",\n            name: \"Database: Deploy Firebase Realtime Database Rules\",\n            checked: false,\n        },\n        {\n            value: \"firestore\",\n            name: \"Firestore: Deploy rules and create indexes for Firestore\",\n            checked: false,\n        },\n        {\n            value: \"functions\",\n            name: \"Functions: Configure and deploy Cloud Functions\",\n            checked: false,\n        },\n        {\n            value: \"hosting\",\n            name: \"Hosting: Configure and deploy Firebase Hosting sites\",\n            checked: false,\n        },\n        {\n            value: \"storage\",\n            name: \"Storage: Deploy Cloud Storage security rules\",\n            checked: false,\n        },\n        {\n            value: \"emulators\",\n            name: \"Emulators: Set up local emulators for Firebase features\",\n            checked: false,\n        },\n    ];\n    var next;\n    if (process.platform === \"win32\") {\n        next = promptOnce({\n            type: \"confirm\",\n            message: \"Are you ready to proceed?\",\n        });\n    }\n    else {\n        next = Promise.resolve(true);\n    }\n    return next\n        .then(function (proceed) {\n        if (!proceed) {\n            return utils.reject(\"Aborted by user.\", { exit: 1 });\n        }\n        if (feature) {\n            setup.featureArg = true;\n            setup.features = [feature];\n            return undefined;\n        }\n        return prompt(setup, [\n            {\n                type: \"checkbox\",\n                name: \"features\",\n                message: \"Which Firebase CLI features do you want to set up for this folder? \" +\n                    \"Press Space to select features, then Enter to confirm your choices.\",\n                choices: choices,\n            },\n        ]);\n    })\n        .then(function () {\n        if (setup.features.length === 0) {\n            return utils.reject(\"Must select at least one feature. Use \" +\n                clc.bold.underline(\"SPACEBAR\") +\n                \" to select features, or provide a feature with \" +\n                clc.bold(\"firebase init [feature_name]\"));\n        }\n        setup.features.unshift(\"project\");\n        return init(setup, config, options);\n    })\n        .then(function () {\n        logger.info();\n        utils.logBullet(\"Writing configuration info to \" + clc.bold(\"firebase.json\") + \"...\");\n        config.writeProjectFile(\"firebase.json\", setup.config);\n        utils.logBullet(\"Writing project information to \" + clc.bold(\".firebaserc\") + \"...\");\n        config.writeProjectFile(\".firebaserc\", setup.rcfile);\n        if (!fsutils.fileExistsSync(config.path(\".gitignore\"))) {\n            utils.logBullet(\"Writing gitignore file to \" + clc.bold(\".gitignore\") + \"...\");\n            config.writeProjectFile(\".gitignore\", GITIGNORE_TEMPLATE);\n        }\n        logger.info();\n        utils.logSuccess(\"Firebase initialization complete!\");\n    });\n});\n"]},"metadata":{},"sourceType":"script"}
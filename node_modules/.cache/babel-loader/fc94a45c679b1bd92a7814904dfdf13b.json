{"ast":null,"code":"\"use strict\";\n\nvar _ = require(\"lodash\");\n\nvar fs = require(\"fs\");\n\nvar path = require(\"path\");\n\nvar npmDependencies = require(\"./npm-dependencies\");\n\nvar _require = require(\"../../../prompt\"),\n    prompt = _require.prompt;\n\nvar TEMPLATE_ROOT = path.resolve(__dirname, \"../../../../templates/init/functions/typescript/\");\nvar PACKAGE_LINTING_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"package.lint.json\"), \"utf8\");\nvar PACKAGE_NO_LINTING_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"package.nolint.json\"), \"utf8\");\nvar TSLINT_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"tslint.json\"), \"utf8\");\nvar TSCONFIG_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"tsconfig.json\"), \"utf8\");\nvar INDEX_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"index.ts\"), \"utf8\");\nvar GITIGNORE_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"_gitignore\"), \"utf8\");\n\nmodule.exports = function (setup, config) {\n  return prompt(setup.functions, [{\n    name: \"lint\",\n    type: \"confirm\",\n    message: \"Do you want to use TSLint to catch probable bugs and enforce style?\",\n    default: true\n  }]).then(function () {\n    if (setup.functions.lint) {\n      _.set(setup, \"config.functions.predeploy\", ['npm --prefix \"$RESOURCE_DIR\" run lint', 'npm --prefix \"$RESOURCE_DIR\" run build']);\n\n      return config.askWriteProjectFile(\"functions/package.json\", PACKAGE_LINTING_TEMPLATE).then(function () {\n        return config.askWriteProjectFile(\"functions/tslint.json\", TSLINT_TEMPLATE);\n      });\n    }\n\n    _.set(setup, \"config.functions.predeploy\", 'npm --prefix \"$RESOURCE_DIR\" run build');\n\n    return config.askWriteProjectFile(\"functions/package.json\", PACKAGE_NO_LINTING_TEMPLATE);\n  }).then(function () {\n    return config.askWriteProjectFile(\"functions/tsconfig.json\", TSCONFIG_TEMPLATE);\n  }).then(function () {\n    return config.askWriteProjectFile(\"functions/src/index.ts\", INDEX_TEMPLATE);\n  }).then(function () {\n    return config.askWriteProjectFile(\"functions/.gitignore\", GITIGNORE_TEMPLATE);\n  }).then(function () {\n    return npmDependencies.askInstallDependencies(setup, config);\n  });\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/lib/init/features/functions/typescript.js"],"names":["_","require","fs","path","npmDependencies","prompt","TEMPLATE_ROOT","resolve","__dirname","PACKAGE_LINTING_TEMPLATE","readFileSync","join","PACKAGE_NO_LINTING_TEMPLATE","TSLINT_TEMPLATE","TSCONFIG_TEMPLATE","INDEX_TEMPLATE","GITIGNORE_TEMPLATE","module","exports","setup","config","functions","name","type","message","default","then","lint","set","askWriteProjectFile","askInstallDependencies"],"mappings":"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","sourcesContent":["\"use strict\";\nvar _ = require(\"lodash\");\nvar fs = require(\"fs\");\nvar path = require(\"path\");\nvar npmDependencies = require(\"./npm-dependencies\");\nvar { prompt } = require(\"../../../prompt\");\nvar TEMPLATE_ROOT = path.resolve(__dirname, \"../../../../templates/init/functions/typescript/\");\nvar PACKAGE_LINTING_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"package.lint.json\"), \"utf8\");\nvar PACKAGE_NO_LINTING_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"package.nolint.json\"), \"utf8\");\nvar TSLINT_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"tslint.json\"), \"utf8\");\nvar TSCONFIG_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"tsconfig.json\"), \"utf8\");\nvar INDEX_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"index.ts\"), \"utf8\");\nvar GITIGNORE_TEMPLATE = fs.readFileSync(path.join(TEMPLATE_ROOT, \"_gitignore\"), \"utf8\");\nmodule.exports = function (setup, config) {\n    return prompt(setup.functions, [\n        {\n            name: \"lint\",\n            type: \"confirm\",\n            message: \"Do you want to use TSLint to catch probable bugs and enforce style?\",\n            default: true,\n        },\n    ])\n        .then(function () {\n        if (setup.functions.lint) {\n            _.set(setup, \"config.functions.predeploy\", [\n                'npm --prefix \"$RESOURCE_DIR\" run lint',\n                'npm --prefix \"$RESOURCE_DIR\" run build',\n            ]);\n            return config\n                .askWriteProjectFile(\"functions/package.json\", PACKAGE_LINTING_TEMPLATE)\n                .then(function () {\n                return config.askWriteProjectFile(\"functions/tslint.json\", TSLINT_TEMPLATE);\n            });\n        }\n        _.set(setup, \"config.functions.predeploy\", 'npm --prefix \"$RESOURCE_DIR\" run build');\n        return config.askWriteProjectFile(\"functions/package.json\", PACKAGE_NO_LINTING_TEMPLATE);\n    })\n        .then(function () {\n        return config.askWriteProjectFile(\"functions/tsconfig.json\", TSCONFIG_TEMPLATE);\n    })\n        .then(function () {\n        return config.askWriteProjectFile(\"functions/src/index.ts\", INDEX_TEMPLATE);\n    })\n        .then(function () {\n        return config.askWriteProjectFile(\"functions/.gitignore\", GITIGNORE_TEMPLATE);\n    })\n        .then(function () {\n        return npmDependencies.askInstallDependencies(setup, config);\n    });\n};\n"]},"metadata":{},"sourceType":"script"}
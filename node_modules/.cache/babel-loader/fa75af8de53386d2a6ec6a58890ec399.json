{"ast":null,"code":"'use strict';\n\nvar path = require('path');\n\nvar fs = require('graceful-fs');\n\nvar osenv = require('osenv');\n\nvar assign = require('object-assign');\n\nvar mkdirp = require('mkdirp');\n\nvar uuid = require('uuid');\n\nvar xdgBasedir = require('xdg-basedir');\n\nvar osTmpdir = require('os-tmpdir');\n\nvar writeFileAtomic = require('write-file-atomic');\n\nvar user = (osenv.user() || uuid.v4()).replace(/\\\\/g, '');\nvar configDir = xdgBasedir.config || path.join(osTmpdir(), user, '.config');\nvar permissionError = 'You don\\'t have access to this file.';\nvar defaultPathMode = parseInt('0700', 8);\nvar writeFileOptions = {\n  mode: parseInt('0600', 8)\n};\n\nfunction Configstore(id, defaults, opts) {\n  opts = opts || {};\n  var pathPrefix = opts.globalConfigPath ? path.join(id, 'config.json') : path.join('configstore', id + '.json');\n  this.path = path.join(configDir, pathPrefix);\n  this.all = assign({}, defaults || {}, this.all || {});\n}\n\nConfigstore.prototype = Object.create(Object.prototype, {\n  all: {\n    get: function () {\n      try {\n        return JSON.parse(fs.readFileSync(this.path, 'utf8'));\n      } catch (err) {\n        // create dir if it doesn't exist\n        if (err.code === 'ENOENT') {\n          mkdirp.sync(path.dirname(this.path), defaultPathMode);\n          return {};\n        } // improve the message of permission errors\n\n\n        if (err.code === 'EACCES') {\n          err.message = err.message + '\\n' + permissionError + '\\n';\n        } // empty the file if it encounters invalid JSON\n\n\n        if (err.name === 'SyntaxError') {\n          writeFileAtomic.sync(this.path, '', writeFileOptions);\n          return {};\n        }\n\n        throw err;\n      }\n    },\n    set: function (val) {\n      try {\n        // make sure the folder exists as it\n        // could have been deleted in the meantime\n        mkdirp.sync(path.dirname(this.path), defaultPathMode);\n        writeFileAtomic.sync(this.path, JSON.stringify(val, null, '\\t'), writeFileOptions);\n      } catch (err) {\n        // improve the message of permission errors\n        if (err.code === 'EACCES') {\n          err.message = err.message + '\\n' + permissionError + '\\n';\n        }\n\n        throw err;\n      }\n    }\n  },\n  size: {\n    get: function () {\n      return Object.keys(this.all || {}).length;\n    }\n  }\n});\n\nConfigstore.prototype.get = function (key) {\n  return this.all[key];\n};\n\nConfigstore.prototype.set = function (key, val) {\n  var config = this.all;\n\n  if (arguments.length === 1) {\n    Object.keys(key).forEach(function (k) {\n      config[k] = key[k];\n    });\n  } else {\n    config[key] = val;\n  }\n\n  this.all = config;\n};\n\nConfigstore.prototype.del = function (key) {\n  var config = this.all;\n  delete config[key];\n  this.all = config;\n};\n\nConfigstore.prototype.clear = function () {\n  this.all = {};\n};\n\nmodule.exports = Configstore;","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/configstore/index.js"],"names":["path","require","fs","osenv","assign","mkdirp","uuid","xdgBasedir","osTmpdir","writeFileAtomic","user","v4","replace","configDir","config","join","permissionError","defaultPathMode","parseInt","writeFileOptions","mode","Configstore","id","defaults","opts","pathPrefix","globalConfigPath","all","prototype","Object","create","get","JSON","parse","readFileSync","err","code","sync","dirname","message","name","set","val","stringify","size","keys","length","key","arguments","forEach","k","del","clear","module","exports"],"mappings":"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","sourcesContent":["'use strict';\nvar path = require('path');\nvar fs = require('graceful-fs');\nvar osenv = require('osenv');\nvar assign = require('object-assign');\nvar mkdirp = require('mkdirp');\nvar uuid = require('uuid');\nvar xdgBasedir = require('xdg-basedir');\nvar osTmpdir = require('os-tmpdir');\nvar writeFileAtomic = require('write-file-atomic');\n\nvar user = (osenv.user() || uuid.v4()).replace(/\\\\/g, '');\nvar configDir = xdgBasedir.config || path.join(osTmpdir(), user, '.config');\nvar permissionError = 'You don\\'t have access to this file.';\nvar defaultPathMode = parseInt('0700', 8);\nvar writeFileOptions = {mode: parseInt('0600', 8)};\n\nfunction Configstore(id, defaults, opts) {\n\topts = opts || {};\n\n\tvar pathPrefix = opts.globalConfigPath ?\n\t\tpath.join(id, 'config.json') :\n\t\tpath.join('configstore', id + '.json');\n\n\tthis.path = path.join(configDir, pathPrefix);\n\n\tthis.all = assign({}, defaults || {}, this.all || {});\n}\n\nConfigstore.prototype = Object.create(Object.prototype, {\n\tall: {\n\t\tget: function () {\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(fs.readFileSync(this.path, 'utf8'));\n\t\t\t} catch (err) {\n\t\t\t\t// create dir if it doesn't exist\n\t\t\t\tif (err.code === 'ENOENT') {\n\t\t\t\t\tmkdirp.sync(path.dirname(this.path), defaultPathMode);\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\n\t\t\t\t// improve the message of permission errors\n\t\t\t\tif (err.code === 'EACCES') {\n\t\t\t\t\terr.message = err.message + '\\n' + permissionError + '\\n';\n\t\t\t\t}\n\n\t\t\t\t// empty the file if it encounters invalid JSON\n\t\t\t\tif (err.name === 'SyntaxError') {\n\t\t\t\t\twriteFileAtomic.sync(this.path, '', writeFileOptions);\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t},\n\t\tset: function (val) {\n\t\t\ttry {\n\t\t\t\t// make sure the folder exists as it\n\t\t\t\t// could have been deleted in the meantime\n\t\t\t\tmkdirp.sync(path.dirname(this.path), defaultPathMode);\n\n\t\t\t\twriteFileAtomic.sync(this.path, JSON.stringify(val, null, '\\t'), writeFileOptions);\n\t\t\t} catch (err) {\n\t\t\t\t// improve the message of permission errors\n\t\t\t\tif (err.code === 'EACCES') {\n\t\t\t\t\terr.message = err.message + '\\n' + permissionError + '\\n';\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t}\n\t},\n\tsize: {\n\t\tget: function () {\n\t\t\treturn Object.keys(this.all || {}).length;\n\t\t}\n\t}\n});\n\nConfigstore.prototype.get = function (key) {\n\treturn this.all[key];\n};\n\nConfigstore.prototype.set = function (key, val) {\n\tvar config = this.all;\n\tif (arguments.length === 1) {\n\t\tObject.keys(key).forEach(function (k) {\n\t\t\tconfig[k] = key[k];\n\t\t});\n\t} else {\n\t\tconfig[key] = val;\n\t}\n\tthis.all = config;\n};\n\nConfigstore.prototype.del = function (key) {\n\tvar config = this.all;\n\tdelete config[key];\n\tthis.all = config;\n};\n\nConfigstore.prototype.clear = function () {\n\tthis.all = {};\n};\n\nmodule.exports = Configstore;\n"]},"metadata":{},"sourceType":"script"}
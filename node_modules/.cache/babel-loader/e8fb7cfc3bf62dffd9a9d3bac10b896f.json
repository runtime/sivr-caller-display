{"ast":null,"code":"\"use strict\";\n\nvar api = require(\"../api\");\n\nvar logger = require(\"../logger\");\n\nvar _require = require(\"../error\"),\n    FirebaseError = _require.FirebaseError;\n\nfunction _getDefaultBucket(projectId) {\n  return api.request(\"GET\", \"/v1/apps/\" + projectId, {\n    auth: true,\n    origin: api.appengineOrigin\n  }).then(function (resp) {\n    if (resp.body.defaultBucket === \"undefined\") {\n      logger.debug(\"Default storage bucket is undefined.\");\n      return Promise.reject(new FirebaseError(\"Your project is being set up. Please wait a minute before deploying again.\"));\n    }\n\n    return Promise.resolve(resp.body.defaultBucket);\n  }, function (err) {\n    logger.info(\"\\n\\nThere was an issue deploying your functions. Verify that your project has a Google App Engine instance setup at https://console.cloud.google.com/appengine and try again. If this issue persists, please contact support.\");\n    return Promise.reject(err);\n  });\n}\n\nfunction _uploadSource(source, uploadUrl) {\n  return api.request(\"PUT\", uploadUrl, {\n    data: source.stream,\n    headers: {\n      \"Content-Type\": \"application/zip\",\n      \"x-goog-content-length-range\": \"0,104857600\"\n    },\n    json: false,\n    origin: api.storageOrigin,\n    logOptions: {\n      skipRequestBody: true\n    }\n  });\n}\n\nmodule.exports = {\n  getDefaultBucket: _getDefaultBucket,\n  upload: _uploadSource\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/lib/gcp/storage.js"],"names":["api","require","logger","FirebaseError","_getDefaultBucket","projectId","request","auth","origin","appengineOrigin","then","resp","body","defaultBucket","debug","Promise","reject","resolve","err","info","_uploadSource","source","uploadUrl","data","stream","headers","json","storageOrigin","logOptions","skipRequestBody","module","exports","getDefaultBucket","upload"],"mappings":"AAAA;;AACA,IAAIA,GAAG,GAAGC,OAAO,CAAC,QAAD,CAAjB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,WAAD,CAApB;;eACwBA,OAAO,CAAC,UAAD,C;IAAzBE,a,YAAAA,a;;AACN,SAASC,iBAAT,CAA2BC,SAA3B,EAAsC;AAClC,SAAOL,GAAG,CACLM,OADE,CACM,KADN,EACa,cAAcD,SAD3B,EACsC;AACzCE,IAAAA,IAAI,EAAE,IADmC;AAEzCC,IAAAA,MAAM,EAAER,GAAG,CAACS;AAF6B,GADtC,EAKFC,IALE,CAKG,UAAUC,IAAV,EAAgB;AACtB,QAAIA,IAAI,CAACC,IAAL,CAAUC,aAAV,KAA4B,WAAhC,EAA6C;AACzCX,MAAAA,MAAM,CAACY,KAAP,CAAa,sCAAb;AACA,aAAOC,OAAO,CAACC,MAAR,CAAe,IAAIb,aAAJ,CAAkB,4EAAlB,CAAf,CAAP;AACH;;AACD,WAAOY,OAAO,CAACE,OAAR,CAAgBN,IAAI,CAACC,IAAL,CAAUC,aAA1B,CAAP;AACH,GAXM,EAWJ,UAAUK,GAAV,EAAe;AACdhB,IAAAA,MAAM,CAACiB,IAAP,CAAY,+NAAZ;AACA,WAAOJ,OAAO,CAACC,MAAR,CAAeE,GAAf,CAAP;AACH,GAdM,CAAP;AAeH;;AACD,SAASE,aAAT,CAAuBC,MAAvB,EAA+BC,SAA/B,EAA0C;AACtC,SAAOtB,GAAG,CAACM,OAAJ,CAAY,KAAZ,EAAmBgB,SAAnB,EAA8B;AACjCC,IAAAA,IAAI,EAAEF,MAAM,CAACG,MADoB;AAEjCC,IAAAA,OAAO,EAAE;AACL,sBAAgB,iBADX;AAEL,qCAA+B;AAF1B,KAFwB;AAMjCC,IAAAA,IAAI,EAAE,KAN2B;AAOjClB,IAAAA,MAAM,EAAER,GAAG,CAAC2B,aAPqB;AAQjCC,IAAAA,UAAU,EAAE;AAAEC,MAAAA,eAAe,EAAE;AAAnB;AARqB,GAA9B,CAAP;AAUH;;AACDC,MAAM,CAACC,OAAP,GAAiB;AACbC,EAAAA,gBAAgB,EAAE5B,iBADL;AAEb6B,EAAAA,MAAM,EAAEb;AAFK,CAAjB","sourcesContent":["\"use strict\";\nvar api = require(\"../api\");\nvar logger = require(\"../logger\");\nvar { FirebaseError } = require(\"../error\");\nfunction _getDefaultBucket(projectId) {\n    return api\n        .request(\"GET\", \"/v1/apps/\" + projectId, {\n        auth: true,\n        origin: api.appengineOrigin,\n    })\n        .then(function (resp) {\n        if (resp.body.defaultBucket === \"undefined\") {\n            logger.debug(\"Default storage bucket is undefined.\");\n            return Promise.reject(new FirebaseError(\"Your project is being set up. Please wait a minute before deploying again.\"));\n        }\n        return Promise.resolve(resp.body.defaultBucket);\n    }, function (err) {\n        logger.info(\"\\n\\nThere was an issue deploying your functions. Verify that your project has a Google App Engine instance setup at https://console.cloud.google.com/appengine and try again. If this issue persists, please contact support.\");\n        return Promise.reject(err);\n    });\n}\nfunction _uploadSource(source, uploadUrl) {\n    return api.request(\"PUT\", uploadUrl, {\n        data: source.stream,\n        headers: {\n            \"Content-Type\": \"application/zip\",\n            \"x-goog-content-length-range\": \"0,104857600\",\n        },\n        json: false,\n        origin: api.storageOrigin,\n        logOptions: { skipRequestBody: true },\n    });\n}\nmodule.exports = {\n    getDefaultBucket: _getDefaultBucket,\n    upload: _uploadSource,\n};\n"]},"metadata":{},"sourceType":"script"}
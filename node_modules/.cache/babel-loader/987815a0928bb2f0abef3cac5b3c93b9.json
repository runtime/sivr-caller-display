{"ast":null,"code":"/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Use of this source code is governed by a BSD-style\n * license that can be found in the LICENSE file or at\n * https://github.com/firebase/superstatic/blob/master/LICENSE\n */\n'use strict';\n\nvar setHeaders = require('./headers');\n\nvar fs = require('fs');\n\nmodule.exports = function (spec) {\n  var defaultErrorContent;\n\n  if (spec.errorPage) {\n    defaultErrorContent = fs.readFileSync(spec.errorPage, 'utf8');\n  }\n\n  return function (req, res, next) {\n    var config = req.superstatic;\n    var errorPage = config.errorPage || '/404.html';\n    setHeaders(spec)({\n      superstatic: config,\n      url: errorPage\n    }, res, function () {\n      var handles = [{\n        file: errorPage,\n        status: 404\n      }];\n\n      if (defaultErrorContent) {\n        handles.push({\n          data: defaultErrorContent,\n          status: 404\n        });\n      }\n\n      res.superstatic.handle(handles, next);\n    });\n  };\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/superstatic/lib/middleware/missing.js"],"names":["setHeaders","require","fs","module","exports","spec","defaultErrorContent","errorPage","readFileSync","req","res","next","config","superstatic","url","handles","file","status","push","data","handle"],"mappings":"AAAA;;;;;;AAMA;;AAEA,IAAIA,UAAU,GAAGC,OAAO,CAAC,WAAD,CAAxB;;AACA,IAAIC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAhB;;AAEAE,MAAM,CAACC,OAAP,GAAiB,UAASC,IAAT,EAAe;AAC9B,MAAIC,mBAAJ;;AACA,MAAID,IAAI,CAACE,SAAT,EAAoB;AAClBD,IAAAA,mBAAmB,GAAGJ,EAAE,CAACM,YAAH,CAAgBH,IAAI,CAACE,SAArB,EAAgC,MAAhC,CAAtB;AACD;;AAED,SAAO,UAASE,GAAT,EAAcC,GAAd,EAAmBC,IAAnB,EAAyB;AAC9B,QAAIC,MAAM,GAAGH,GAAG,CAACI,WAAjB;AACA,QAAIN,SAAS,GAAGK,MAAM,CAACL,SAAP,IAAoB,WAApC;AAEAP,IAAAA,UAAU,CAACK,IAAD,CAAV,CAAiB;AACfQ,MAAAA,WAAW,EAAED,MADE;AAEfE,MAAAA,GAAG,EAAEP;AAFU,KAAjB,EAGGG,GAHH,EAGQ,YAAW;AACjB,UAAIK,OAAO,GAAG,CAAC;AAACC,QAAAA,IAAI,EAAET,SAAP;AAAkBU,QAAAA,MAAM,EAAE;AAA1B,OAAD,CAAd;;AACA,UAAIX,mBAAJ,EAAyB;AACvBS,QAAAA,OAAO,CAACG,IAAR,CAAa;AAACC,UAAAA,IAAI,EAAEb,mBAAP;AAA4BW,UAAAA,MAAM,EAAE;AAApC,SAAb;AACD;;AACDP,MAAAA,GAAG,CAACG,WAAJ,CAAgBO,MAAhB,CAAuBL,OAAvB,EAAgCJ,IAAhC;AACD,KATD;AAUD,GAdD;AAeD,CArBD","sourcesContent":["/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Use of this source code is governed by a BSD-style\n * license that can be found in the LICENSE file or at\n * https://github.com/firebase/superstatic/blob/master/LICENSE\n */\n'use strict';\n\nvar setHeaders = require('./headers');\nvar fs = require('fs');\n\nmodule.exports = function(spec) {\n  var defaultErrorContent;\n  if (spec.errorPage) {\n    defaultErrorContent = fs.readFileSync(spec.errorPage, 'utf8');\n  }\n\n  return function(req, res, next) {\n    var config = req.superstatic;\n    var errorPage = config.errorPage || '/404.html';\n\n    setHeaders(spec)({\n      superstatic: config,\n      url: errorPage\n    }, res, function() {\n      var handles = [{file: errorPage, status: 404}];\n      if (defaultErrorContent) {\n        handles.push({data: defaultErrorContent, status: 404});\n      }\n      res.superstatic.handle(handles, next);\n    });\n  };\n};\n"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"var fs = require('graceful-fs');\n\nvar path = require('path');\n\nvar os = require('os'); // HFS, ext{2,3}, FAT do not, Node.js v0.10 does not\n\n\nfunction hasMillisResSync() {\n  var tmpfile = path.join('millis-test-sync' + Date.now().toString() + Math.random().toString().slice(2));\n  tmpfile = path.join(os.tmpdir(), tmpfile); // 550 millis past UNIX epoch\n\n  var d = new Date(1435410243862);\n  fs.writeFileSync(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141');\n  var fd = fs.openSync(tmpfile, 'r+');\n  fs.futimesSync(fd, d, d);\n  fs.closeSync(fd);\n  return fs.statSync(tmpfile).mtime > 1435410243000;\n}\n\nfunction hasMillisRes(callback) {\n  var tmpfile = path.join('millis-test' + Date.now().toString() + Math.random().toString().slice(2));\n  tmpfile = path.join(os.tmpdir(), tmpfile); // 550 millis past UNIX epoch\n\n  var d = new Date(1435410243862);\n  fs.writeFile(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141', function (err) {\n    if (err) return callback(err);\n    fs.open(tmpfile, 'r+', function (err, fd) {\n      if (err) return callback(err);\n      fs.futimes(fd, d, d, function (err) {\n        if (err) return callback(err);\n        fs.close(fd, function (err) {\n          if (err) return callback(err);\n          fs.stat(tmpfile, function (err, stats) {\n            if (err) return callback(err);\n            callback(null, stats.mtime > 1435410243000);\n          });\n        });\n      });\n    });\n  });\n}\n\nfunction timeRemoveMillis(timestamp) {\n  if (typeof timestamp === 'number') {\n    return Math.floor(timestamp / 1000) * 1000;\n  } else if (timestamp instanceof Date) {\n    return new Date(Math.floor(timestamp.getTime() / 1000) * 1000);\n  } else {\n    throw new Error('fs-extra: timeRemoveMillis() unknown parameter type');\n  }\n}\n\nfunction utimesMillis(path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', function (err, fd) {\n    if (err) return callback(err);\n    fs.futimes(fd, atime, mtime, function (err) {\n      if (err) return callback(err);\n      fs.close(fd, callback);\n    });\n  });\n}\n\nmodule.exports = {\n  hasMillisRes: hasMillisRes,\n  hasMillisResSync: hasMillisResSync,\n  timeRemoveMillis: timeRemoveMillis,\n  utimesMillis: utimesMillis\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/node_modules/fs-extra/lib/util/utimes.js"],"names":["fs","require","path","os","hasMillisResSync","tmpfile","join","Date","now","toString","Math","random","slice","tmpdir","d","writeFileSync","fd","openSync","futimesSync","closeSync","statSync","mtime","hasMillisRes","callback","writeFile","err","open","futimes","close","stat","stats","timeRemoveMillis","timestamp","floor","getTime","Error","utimesMillis","atime","module","exports"],"mappings":"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","sourcesContent":["var fs = require('graceful-fs')\nvar path = require('path')\nvar os = require('os')\n\n// HFS, ext{2,3}, FAT do not, Node.js v0.10 does not\nfunction hasMillisResSync () {\n  var tmpfile = path.join('millis-test-sync' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  var d = new Date(1435410243862)\n  fs.writeFileSync(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141')\n  var fd = fs.openSync(tmpfile, 'r+')\n  fs.futimesSync(fd, d, d)\n  fs.closeSync(fd)\n  return fs.statSync(tmpfile).mtime > 1435410243000\n}\n\nfunction hasMillisRes (callback) {\n  var tmpfile = path.join('millis-test' + Date.now().toString() + Math.random().toString().slice(2))\n  tmpfile = path.join(os.tmpdir(), tmpfile)\n\n  // 550 millis past UNIX epoch\n  var d = new Date(1435410243862)\n  fs.writeFile(tmpfile, 'https://github.com/jprichardson/node-fs-extra/pull/141', function (err) {\n    if (err) return callback(err)\n    fs.open(tmpfile, 'r+', function (err, fd) {\n      if (err) return callback(err)\n      fs.futimes(fd, d, d, function (err) {\n        if (err) return callback(err)\n        fs.close(fd, function (err) {\n          if (err) return callback(err)\n          fs.stat(tmpfile, function (err, stats) {\n            if (err) return callback(err)\n            callback(null, stats.mtime > 1435410243000)\n          })\n        })\n      })\n    })\n  })\n}\n\nfunction timeRemoveMillis (timestamp) {\n  if (typeof timestamp === 'number') {\n    return Math.floor(timestamp / 1000) * 1000\n  } else if (timestamp instanceof Date) {\n    return new Date(Math.floor(timestamp.getTime() / 1000) * 1000)\n  } else {\n    throw new Error('fs-extra: timeRemoveMillis() unknown parameter type')\n  }\n}\n\nfunction utimesMillis (path, atime, mtime, callback) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  fs.open(path, 'r+', function (err, fd) {\n    if (err) return callback(err)\n    fs.futimes(fd, atime, mtime, function (err) {\n      if (err) return callback(err)\n      fs.close(fd, callback)\n    })\n  })\n}\n\nmodule.exports = {\n  hasMillisRes: hasMillisRes,\n  hasMillisResSync: hasMillisResSync,\n  timeRemoveMillis: timeRemoveMillis,\n  utimesMillis: utimesMillis\n}\n"]},"metadata":{},"sourceType":"script"}
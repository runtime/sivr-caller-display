{"ast":null,"code":"\"use strict\";\n\nvar request = require(\"request\");\n\nvar logger = require(\"../logger\");\n\nvar utils = require(\"../utils\");\n\nvar SDK_PATH_REGEXP = /^\\/__\\/firebase\\/([^/]+)\\/([^/]+)$/;\n\nmodule.exports = function (init) {\n  return function (req, res, next) {\n    var match = req.url.match(SDK_PATH_REGEXP);\n\n    if (match) {\n      var version = match[1];\n      var sdkName = match[2];\n      var url = \"https://www.gstatic.com/firebasejs/\" + version + \"/\" + sdkName;\n      var preq = request(url).on(\"response\", function (pres) {\n        if (pres.statusCode === 404) {\n          return next();\n        }\n\n        return preq.pipe(res);\n      }).on(\"error\", function (e) {\n        utils.logLabeledWarning(\"hosting\", `Could not load Firebase SDK ${sdkName} v${version}, check your internet connection.`);\n        logger.debug(e);\n      });\n    } else if (req.url === \"/__/firebase/init.js\") {\n      res.setHeader(\"Content-Type\", \"application/javascript\");\n      res.end(init.js);\n    } else if (req.url === \"/__/firebase/init.json\") {\n      res.setHeader(\"Content-Type\", \"application/json\");\n      res.end(init.json);\n    } else {\n      next();\n    }\n  };\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/lib/hosting/initMiddleware.js"],"names":["request","require","logger","utils","SDK_PATH_REGEXP","module","exports","init","req","res","next","match","url","version","sdkName","preq","on","pres","statusCode","pipe","e","logLabeledWarning","debug","setHeader","end","js","json"],"mappings":"AAAA;;AACA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,WAAD,CAApB;;AACA,IAAIE,KAAK,GAAGF,OAAO,CAAC,UAAD,CAAnB;;AACA,IAAIG,eAAe,GAAG,oCAAtB;;AACAC,MAAM,CAACC,OAAP,GAAiB,UAAUC,IAAV,EAAgB;AAC7B,SAAO,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC7B,QAAIC,KAAK,GAAGH,GAAG,CAACI,GAAJ,CAAQD,KAAR,CAAcP,eAAd,CAAZ;;AACA,QAAIO,KAAJ,EAAW;AACP,UAAIE,OAAO,GAAGF,KAAK,CAAC,CAAD,CAAnB;AACA,UAAIG,OAAO,GAAGH,KAAK,CAAC,CAAD,CAAnB;AACA,UAAIC,GAAG,GAAG,wCAAwCC,OAAxC,GAAkD,GAAlD,GAAwDC,OAAlE;AACA,UAAIC,IAAI,GAAGf,OAAO,CAACY,GAAD,CAAP,CACNI,EADM,CACH,UADG,EACS,UAAUC,IAAV,EAAgB;AAChC,YAAIA,IAAI,CAACC,UAAL,KAAoB,GAAxB,EAA6B;AACzB,iBAAOR,IAAI,EAAX;AACH;;AACD,eAAOK,IAAI,CAACI,IAAL,CAAUV,GAAV,CAAP;AACH,OANU,EAONO,EAPM,CAOH,OAPG,EAOM,UAAUI,CAAV,EAAa;AAC1BjB,QAAAA,KAAK,CAACkB,iBAAN,CAAwB,SAAxB,EAAoC,+BAA8BP,OAAQ,KAAID,OAAQ,mCAAtF;AACAX,QAAAA,MAAM,CAACoB,KAAP,CAAaF,CAAb;AACH,OAVU,CAAX;AAWH,KAfD,MAgBK,IAAIZ,GAAG,CAACI,GAAJ,KAAY,sBAAhB,EAAwC;AACzCH,MAAAA,GAAG,CAACc,SAAJ,CAAc,cAAd,EAA8B,wBAA9B;AACAd,MAAAA,GAAG,CAACe,GAAJ,CAAQjB,IAAI,CAACkB,EAAb;AACH,KAHI,MAIA,IAAIjB,GAAG,CAACI,GAAJ,KAAY,wBAAhB,EAA0C;AAC3CH,MAAAA,GAAG,CAACc,SAAJ,CAAc,cAAd,EAA8B,kBAA9B;AACAd,MAAAA,GAAG,CAACe,GAAJ,CAAQjB,IAAI,CAACmB,IAAb;AACH,KAHI,MAIA;AACDhB,MAAAA,IAAI;AACP;AACJ,GA7BD;AA8BH,CA/BD","sourcesContent":["\"use strict\";\nvar request = require(\"request\");\nvar logger = require(\"../logger\");\nvar utils = require(\"../utils\");\nvar SDK_PATH_REGEXP = /^\\/__\\/firebase\\/([^/]+)\\/([^/]+)$/;\nmodule.exports = function (init) {\n    return function (req, res, next) {\n        var match = req.url.match(SDK_PATH_REGEXP);\n        if (match) {\n            var version = match[1];\n            var sdkName = match[2];\n            var url = \"https://www.gstatic.com/firebasejs/\" + version + \"/\" + sdkName;\n            var preq = request(url)\n                .on(\"response\", function (pres) {\n                if (pres.statusCode === 404) {\n                    return next();\n                }\n                return preq.pipe(res);\n            })\n                .on(\"error\", function (e) {\n                utils.logLabeledWarning(\"hosting\", `Could not load Firebase SDK ${sdkName} v${version}, check your internet connection.`);\n                logger.debug(e);\n            });\n        }\n        else if (req.url === \"/__/firebase/init.js\") {\n            res.setHeader(\"Content-Type\", \"application/javascript\");\n            res.end(init.js);\n        }\n        else if (req.url === \"/__/firebase/init.json\") {\n            res.setHeader(\"Content-Type\", \"application/json\");\n            res.end(init.json);\n        }\n        else {\n            next();\n        }\n    };\n};\n"]},"metadata":{},"sourceType":"script"}
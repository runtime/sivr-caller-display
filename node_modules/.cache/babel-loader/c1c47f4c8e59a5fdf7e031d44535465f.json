{"ast":null,"code":"/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Use of this source code is governed by a BSD-style\n * license that can be found in the LICENSE file or at\n * https://github.com/firebase/superstatic/blob/master/LICENSE\n */\n'use strict';\n\nvar fs = require('fs');\n\nvar _ = require('lodash');\n\nvar join = require('join-path');\n\nvar path = require('path');\n\nvar CONFIG_FILE = ['superstatic.json', 'firebase.json'];\n\nmodule.exports = function (filename) {\n  if (_.isFunction(filename)) {\n    return filename;\n  }\n\n  filename = filename || CONFIG_FILE;\n  var configObject = {};\n  var config = {}; // From custom config data passed in\n\n  try {\n    configObject = JSON.parse(filename);\n  } catch (e) {\n    if (_.isPlainObject(filename)) {\n      configObject = filename;\n      filename = CONFIG_FILE;\n    }\n  }\n\n  if (_.isArray(filename)) {\n    filename = _.find(filename, function (name) {\n      return fs.existsSync(join(process.cwd(), name));\n    });\n  } // Set back to default config file if stringified object is\n  // given as config. With this, we override values in the config file\n\n\n  if (_.isPlainObject(filename)) {\n    filename = CONFIG_FILE;\n  } // A file name or array of file names\n\n\n  if (_.isString(filename) && _.endsWith(filename, 'json')) {\n    try {\n      config = JSON.parse(fs.readFileSync(path.resolve(filename)));\n      config = config.hosting ? config.hosting : config;\n    } catch (e) {// do nothing\n    }\n  } // Passing an object as the config value merges\n  // the config data\n\n\n  return _.assign(config, configObject);\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/superstatic/lib/loaders/config-file.js"],"names":["fs","require","_","join","path","CONFIG_FILE","module","exports","filename","isFunction","configObject","config","JSON","parse","e","isPlainObject","isArray","find","name","existsSync","process","cwd","isString","endsWith","readFileSync","resolve","hosting","assign"],"mappings":"AAAA;;;;;;AAMA;;AAEA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AAEA,IAAIC,CAAC,GAAGD,OAAO,CAAC,QAAD,CAAf;;AACA,IAAIE,IAAI,GAAGF,OAAO,CAAC,WAAD,CAAlB;;AACA,IAAIG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAAlB;;AAEA,IAAII,WAAW,GAAG,CAAC,kBAAD,EAAqB,eAArB,CAAlB;;AAEAC,MAAM,CAACC,OAAP,GAAiB,UAASC,QAAT,EAAmB;AAClC,MAAIN,CAAC,CAACO,UAAF,CAAaD,QAAb,CAAJ,EAA4B;AAAE,WAAOA,QAAP;AAAkB;;AAEhDA,EAAAA,QAAQ,GAAGA,QAAQ,IAAIH,WAAvB;AAEA,MAAIK,YAAY,GAAG,EAAnB;AACA,MAAIC,MAAM,GAAG,EAAb,CANkC,CAQlC;;AACA,MAAI;AACFD,IAAAA,YAAY,GAAGE,IAAI,CAACC,KAAL,CAAWL,QAAX,CAAf;AACD,GAFD,CAEE,OAAOM,CAAP,EAAU;AACV,QAAIZ,CAAC,CAACa,aAAF,CAAgBP,QAAhB,CAAJ,EAA+B;AAC7BE,MAAAA,YAAY,GAAGF,QAAf;AACAA,MAAAA,QAAQ,GAAGH,WAAX;AACD;AACF;;AAED,MAAIH,CAAC,CAACc,OAAF,CAAUR,QAAV,CAAJ,EAAyB;AACvBA,IAAAA,QAAQ,GAAGN,CAAC,CAACe,IAAF,CAAOT,QAAP,EAAiB,UAASU,IAAT,EAAe;AACzC,aAAOlB,EAAE,CAACmB,UAAH,CAAchB,IAAI,CAACiB,OAAO,CAACC,GAAR,EAAD,EAAgBH,IAAhB,CAAlB,CAAP;AACD,KAFU,CAAX;AAGD,GAtBiC,CAwBlC;AACA;;;AACA,MAAIhB,CAAC,CAACa,aAAF,CAAgBP,QAAhB,CAAJ,EAA+B;AAC7BA,IAAAA,QAAQ,GAAGH,WAAX;AACD,GA5BiC,CA+BlC;;;AACA,MAAIH,CAAC,CAACoB,QAAF,CAAWd,QAAX,KAAwBN,CAAC,CAACqB,QAAF,CAAWf,QAAX,EAAqB,MAArB,CAA5B,EAA0D;AACxD,QAAI;AACFG,MAAAA,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWb,EAAE,CAACwB,YAAH,CAAgBpB,IAAI,CAACqB,OAAL,CAAajB,QAAb,CAAhB,CAAX,CAAT;AACAG,MAAAA,MAAM,GAAGA,MAAM,CAACe,OAAP,GAAiBf,MAAM,CAACe,OAAxB,GAAkCf,MAA3C;AACD,KAHD,CAGE,OAAOG,CAAP,EAAU,CACV;AACD;AACF,GAvCiC,CAyClC;AACA;;;AACA,SAAOZ,CAAC,CAACyB,MAAF,CAAShB,MAAT,EAAiBD,YAAjB,CAAP;AACD,CA5CD","sourcesContent":["/**\n * Copyright 2015 Google Inc. All Rights Reserved.\n * Use of this source code is governed by a BSD-style\n * license that can be found in the LICENSE file or at\n * https://github.com/firebase/superstatic/blob/master/LICENSE\n */\n'use strict';\n\nvar fs = require('fs');\n\nvar _ = require('lodash');\nvar join = require('join-path');\nvar path = require('path');\n\nvar CONFIG_FILE = ['superstatic.json', 'firebase.json'];\n\nmodule.exports = function(filename) {\n  if (_.isFunction(filename)) { return filename; }\n\n  filename = filename || CONFIG_FILE;\n\n  var configObject = {};\n  var config = {};\n\n  // From custom config data passed in\n  try {\n    configObject = JSON.parse(filename);\n  } catch (e) {\n    if (_.isPlainObject(filename)) {\n      configObject = filename;\n      filename = CONFIG_FILE;\n    }\n  }\n\n  if (_.isArray(filename)) {\n    filename = _.find(filename, function(name) {\n      return fs.existsSync(join(process.cwd(), name));\n    });\n  }\n\n  // Set back to default config file if stringified object is\n  // given as config. With this, we override values in the config file\n  if (_.isPlainObject(filename)) {\n    filename = CONFIG_FILE;\n  }\n\n\n  // A file name or array of file names\n  if (_.isString(filename) && _.endsWith(filename, 'json')) {\n    try {\n      config = JSON.parse(fs.readFileSync(path.resolve(filename)));\n      config = config.hosting ? config.hosting : config;\n    } catch (e) {\n      // do nothing\n    }\n  }\n\n  // Passing an object as the config value merges\n  // the config data\n  return _.assign(config, configObject);\n};\n"]},"metadata":{},"sourceType":"script"}
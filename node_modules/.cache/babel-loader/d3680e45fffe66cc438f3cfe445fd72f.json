{"ast":null,"code":"\"use strict\";\n\nvar _require = require(\"../command\"),\n    Command = _require.Command;\n\nvar logger = require(\"../logger\");\n\nvar requireAuth = require(\"../requireAuth\");\n\nvar _require2 = require(\"../management/projects\"),\n    getFirebaseProject = _require2.getFirebaseProject,\n    listFirebaseProjects = _require2.listFirebaseProjects;\n\nvar clc = require(\"cli-color\");\n\nvar utils = require(\"../utils\");\n\nvar _ = require(\"lodash\");\n\nvar _require3 = require(\"../prompt\"),\n    prompt = _require3.prompt;\n\nvar listAliases = function (options) {\n  if (options.rc.hasProjects) {\n    logger.info(\"Project aliases for\", clc.bold(options.projectRoot) + \":\");\n    logger.info();\n\n    _.forEach(options.rc.projects, function (projectId, alias) {\n      var listing = alias + \" (\" + projectId + \")\";\n\n      if (options.project === projectId || options.projectAlias === alias) {\n        logger.info(clc.cyan.bold(\"* \" + listing));\n      } else {\n        logger.info(\"  \" + listing);\n      }\n    });\n\n    logger.info();\n  }\n\n  logger.info(\"Run\", clc.bold(\"firebase use --add\"), \"to define a new project alias.\");\n};\n\nvar verifyMessage = function (name) {\n  return \"please verify project \" + clc.bold(name) + \" exists and you have access.\";\n};\n\nmodule.exports = new Command(\"use [alias_or_project_id]\").description(\"set an active Firebase project for your working directory\").option(\"--add\", \"create a new project alias interactively\").option(\"--alias <name>\", \"create a new alias for the provided project id\").option(\"--unalias <name>\", \"remove an already created project alias\").option(\"--clear\", \"clear the active project selection\").before(requireAuth).action(function (newActive, options) {\n  var aliasOpt;\n  var i = process.argv.indexOf(\"--alias\");\n\n  if (i >= 0 && process.argv.length > i + 1) {\n    aliasOpt = process.argv[i + 1];\n  }\n\n  if (!options.projectRoot) {\n    return utils.reject(clc.bold(\"firebase use\") + \" must be run from a Firebase project directory.\\n\\nRun \" + clc.bold(\"firebase init\") + \" to start a project directory in the current folder.\");\n  }\n\n  if (newActive) {\n    var aliasedProject = options.rc.get([\"projects\", newActive]);\n    var project = null;\n    const lookupProject = aliasedProject || newActive;\n    return getFirebaseProject(lookupProject).then(foundProject => {\n      project = foundProject;\n    }).catch(() => {\n      return utils.reject(\"Invalid project selection, \" + verifyMessage(newActive));\n    }).then(() => {\n      if (aliasOpt) {\n        if (!project) {\n          return utils.reject(\"Cannot create alias \" + clc.bold(aliasOpt) + \", \" + verifyMessage(newActive));\n        }\n\n        options.rc.addProjectAlias(aliasOpt, newActive);\n        aliasedProject = newActive;\n        logger.info(\"Created alias\", clc.bold(aliasOpt), \"for\", aliasedProject + \".\");\n      }\n\n      if (aliasedProject) {\n        if (!project) {\n          return utils.reject(\"Unable to use alias \" + clc.bold(newActive) + \", \" + verifyMessage(aliasedProject));\n        }\n\n        utils.makeActiveProject(options.projectRoot, newActive);\n        logger.info(\"Now using alias\", clc.bold(newActive), \"(\" + aliasedProject + \")\");\n      } else if (project) {\n        utils.makeActiveProject(options.projectRoot, newActive);\n        logger.info(\"Now using project\", clc.bold(newActive));\n      } else {\n        return utils.reject(\"Invalid project selection, \" + verifyMessage(newActive));\n      }\n    });\n  } else if (options.unalias) {\n    if (_.has(options.rc.data, [\"projects\", options.unalias])) {\n      options.rc.removeProjectAlias(options.unalias);\n      logger.info(\"Removed alias\", clc.bold(options.unalias));\n      logger.info();\n      listAliases(options);\n    }\n  } else if (options.add) {\n    if (options.nonInteractive) {\n      return utils.reject(\"Cannot run \" + clc.bold(\"firebase use --add\") + \" in non-interactive mode. Use \" + clc.bold(\"firebase use <project_id> --alias <alias>\") + \" instead.\");\n    }\n\n    return listFirebaseProjects().then(function (projects) {\n      var results = {};\n      return prompt(results, [{\n        type: \"list\",\n        name: \"project\",\n        message: \"Which project do you want to add?\",\n        choices: projects.map(p => p.projectId).sort()\n      }, {\n        type: \"input\",\n        name: \"alias\",\n        message: \"What alias do you want to use for this project? (e.g. staging)\",\n        validate: function (input) {\n          return input && input.length > 0;\n        }\n      }]).then(function () {\n        options.rc.addProjectAlias(results.alias, results.project);\n        utils.makeActiveProject(options.projectRoot, results.alias);\n        logger.info();\n        logger.info(\"Created alias\", clc.bold(results.alias), \"for\", results.project + \".\");\n        logger.info(\"Now using alias\", clc.bold(results.alias) + \" (\" + results.project + \")\");\n      });\n    });\n  } else if (options.clear) {\n    utils.makeActiveProject(options.projectRoot, null);\n    options.projectAlias = null;\n    options.project = null;\n    logger.info(\"Cleared active project.\");\n    logger.info();\n    listAliases(options);\n  } else {\n    if (options.nonInteractive || !process.stdout.isTTY) {\n      if (options.project) {\n        logger.info(options.project);\n        return options.project;\n      }\n\n      return utils.reject(\"No active project\", {\n        exit: 1\n      });\n    }\n\n    if (options.projectAlias) {\n      logger.info(\"Active Project:\", clc.bold.cyan(options.projectAlias + \" (\" + options.project + \")\"));\n    } else if (options.project) {\n      logger.info(\"Active Project:\", clc.bold.cyan(options.project));\n    } else {\n      var msg = \"No project is currently active\";\n\n      if (options.rc.hasProjects) {\n        msg += \", and no aliases have been created.\";\n      }\n\n      logger.info(msg + \".\");\n    }\n\n    logger.info();\n    listAliases(options);\n    return options.project;\n  }\n});","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/lib/commands/use.js"],"names":["require","Command","logger","requireAuth","getFirebaseProject","listFirebaseProjects","clc","utils","_","prompt","listAliases","options","rc","hasProjects","info","bold","projectRoot","forEach","projects","projectId","alias","listing","project","projectAlias","cyan","verifyMessage","name","module","exports","description","option","before","action","newActive","aliasOpt","i","process","argv","indexOf","length","reject","aliasedProject","get","lookupProject","then","foundProject","catch","addProjectAlias","makeActiveProject","unalias","has","data","removeProjectAlias","add","nonInteractive","results","type","message","choices","map","p","sort","validate","input","clear","stdout","isTTY","exit","msg"],"mappings":"AAAA;;eACkBA,OAAO,CAAC,YAAD,C;IAAnBC,O,YAAAA,O;;AACN,IAAIC,MAAM,GAAGF,OAAO,CAAC,WAAD,CAApB;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAC,gBAAD,CAAzB;;gBACmDA,OAAO,CAAC,wBAAD,C;IAApDI,kB,aAAAA,kB;IAAoBC,oB,aAAAA,oB;;AAC1B,IAAIC,GAAG,GAAGN,OAAO,CAAC,WAAD,CAAjB;;AACA,IAAIO,KAAK,GAAGP,OAAO,CAAC,UAAD,CAAnB;;AACA,IAAIQ,CAAC,GAAGR,OAAO,CAAC,QAAD,CAAf;;gBACiBA,OAAO,CAAC,WAAD,C;IAAlBS,M,aAAAA,M;;AACN,IAAIC,WAAW,GAAG,UAAUC,OAAV,EAAmB;AACjC,MAAIA,OAAO,CAACC,EAAR,CAAWC,WAAf,EAA4B;AACxBX,IAAAA,MAAM,CAACY,IAAP,CAAY,qBAAZ,EAAmCR,GAAG,CAACS,IAAJ,CAASJ,OAAO,CAACK,WAAjB,IAAgC,GAAnE;AACAd,IAAAA,MAAM,CAACY,IAAP;;AACAN,IAAAA,CAAC,CAACS,OAAF,CAAUN,OAAO,CAACC,EAAR,CAAWM,QAArB,EAA+B,UAAUC,SAAV,EAAqBC,KAArB,EAA4B;AACvD,UAAIC,OAAO,GAAGD,KAAK,GAAG,IAAR,GAAeD,SAAf,GAA2B,GAAzC;;AACA,UAAIR,OAAO,CAACW,OAAR,KAAoBH,SAApB,IAAiCR,OAAO,CAACY,YAAR,KAAyBH,KAA9D,EAAqE;AACjElB,QAAAA,MAAM,CAACY,IAAP,CAAYR,GAAG,CAACkB,IAAJ,CAAST,IAAT,CAAc,OAAOM,OAArB,CAAZ;AACH,OAFD,MAGK;AACDnB,QAAAA,MAAM,CAACY,IAAP,CAAY,OAAOO,OAAnB;AACH;AACJ,KARD;;AASAnB,IAAAA,MAAM,CAACY,IAAP;AACH;;AACDZ,EAAAA,MAAM,CAACY,IAAP,CAAY,KAAZ,EAAmBR,GAAG,CAACS,IAAJ,CAAS,oBAAT,CAAnB,EAAmD,gCAAnD;AACH,CAhBD;;AAiBA,IAAIU,aAAa,GAAG,UAAUC,IAAV,EAAgB;AAChC,SAAO,2BAA2BpB,GAAG,CAACS,IAAJ,CAASW,IAAT,CAA3B,GAA4C,8BAAnD;AACH,CAFD;;AAGAC,MAAM,CAACC,OAAP,GAAiB,IAAI3B,OAAJ,CAAY,2BAAZ,EACZ4B,WADY,CACA,2DADA,EAEZC,MAFY,CAEL,OAFK,EAEI,0CAFJ,EAGZA,MAHY,CAGL,gBAHK,EAGa,gDAHb,EAIZA,MAJY,CAIL,kBAJK,EAIe,yCAJf,EAKZA,MALY,CAKL,SALK,EAKM,oCALN,EAMZC,MANY,CAML5B,WANK,EAOZ6B,MAPY,CAOL,UAAUC,SAAV,EAAqBtB,OAArB,EAA8B;AACtC,MAAIuB,QAAJ;AACA,MAAIC,CAAC,GAAGC,OAAO,CAACC,IAAR,CAAaC,OAAb,CAAqB,SAArB,CAAR;;AACA,MAAIH,CAAC,IAAI,CAAL,IAAUC,OAAO,CAACC,IAAR,CAAaE,MAAb,GAAsBJ,CAAC,GAAG,CAAxC,EAA2C;AACvCD,IAAAA,QAAQ,GAAGE,OAAO,CAACC,IAAR,CAAaF,CAAC,GAAG,CAAjB,CAAX;AACH;;AACD,MAAI,CAACxB,OAAO,CAACK,WAAb,EAA0B;AACtB,WAAOT,KAAK,CAACiC,MAAN,CAAalC,GAAG,CAACS,IAAJ,CAAS,cAAT,IAChB,yDADgB,GAEhBT,GAAG,CAACS,IAAJ,CAAS,eAAT,CAFgB,GAGhB,sDAHG,CAAP;AAIH;;AACD,MAAIkB,SAAJ,EAAe;AACX,QAAIQ,cAAc,GAAG9B,OAAO,CAACC,EAAR,CAAW8B,GAAX,CAAe,CAAC,UAAD,EAAaT,SAAb,CAAf,CAArB;AACA,QAAIX,OAAO,GAAG,IAAd;AACA,UAAMqB,aAAa,GAAGF,cAAc,IAAIR,SAAxC;AACA,WAAO7B,kBAAkB,CAACuC,aAAD,CAAlB,CACFC,IADE,CACIC,YAAD,IAAkB;AACxBvB,MAAAA,OAAO,GAAGuB,YAAV;AACH,KAHM,EAIFC,KAJE,CAII,MAAM;AACb,aAAOvC,KAAK,CAACiC,MAAN,CAAa,gCAAgCf,aAAa,CAACQ,SAAD,CAA1D,CAAP;AACH,KANM,EAOFW,IAPE,CAOG,MAAM;AACZ,UAAIV,QAAJ,EAAc;AACV,YAAI,CAACZ,OAAL,EAAc;AACV,iBAAOf,KAAK,CAACiC,MAAN,CAAa,yBAAyBlC,GAAG,CAACS,IAAJ,CAASmB,QAAT,CAAzB,GAA8C,IAA9C,GAAqDT,aAAa,CAACQ,SAAD,CAA/E,CAAP;AACH;;AACDtB,QAAAA,OAAO,CAACC,EAAR,CAAWmC,eAAX,CAA2Bb,QAA3B,EAAqCD,SAArC;AACAQ,QAAAA,cAAc,GAAGR,SAAjB;AACA/B,QAAAA,MAAM,CAACY,IAAP,CAAY,eAAZ,EAA6BR,GAAG,CAACS,IAAJ,CAASmB,QAAT,CAA7B,EAAiD,KAAjD,EAAwDO,cAAc,GAAG,GAAzE;AACH;;AACD,UAAIA,cAAJ,EAAoB;AAChB,YAAI,CAACnB,OAAL,EAAc;AACV,iBAAOf,KAAK,CAACiC,MAAN,CAAa,yBAAyBlC,GAAG,CAACS,IAAJ,CAASkB,SAAT,CAAzB,GAA+C,IAA/C,GAAsDR,aAAa,CAACgB,cAAD,CAAhF,CAAP;AACH;;AACDlC,QAAAA,KAAK,CAACyC,iBAAN,CAAwBrC,OAAO,CAACK,WAAhC,EAA6CiB,SAA7C;AACA/B,QAAAA,MAAM,CAACY,IAAP,CAAY,iBAAZ,EAA+BR,GAAG,CAACS,IAAJ,CAASkB,SAAT,CAA/B,EAAoD,MAAMQ,cAAN,GAAuB,GAA3E;AACH,OAND,MAOK,IAAInB,OAAJ,EAAa;AACdf,QAAAA,KAAK,CAACyC,iBAAN,CAAwBrC,OAAO,CAACK,WAAhC,EAA6CiB,SAA7C;AACA/B,QAAAA,MAAM,CAACY,IAAP,CAAY,mBAAZ,EAAiCR,GAAG,CAACS,IAAJ,CAASkB,SAAT,CAAjC;AACH,OAHI,MAIA;AACD,eAAO1B,KAAK,CAACiC,MAAN,CAAa,gCAAgCf,aAAa,CAACQ,SAAD,CAA1D,CAAP;AACH;AACJ,KA9BM,CAAP;AA+BH,GAnCD,MAoCK,IAAItB,OAAO,CAACsC,OAAZ,EAAqB;AACtB,QAAIzC,CAAC,CAAC0C,GAAF,CAAMvC,OAAO,CAACC,EAAR,CAAWuC,IAAjB,EAAuB,CAAC,UAAD,EAAaxC,OAAO,CAACsC,OAArB,CAAvB,CAAJ,EAA2D;AACvDtC,MAAAA,OAAO,CAACC,EAAR,CAAWwC,kBAAX,CAA8BzC,OAAO,CAACsC,OAAtC;AACA/C,MAAAA,MAAM,CAACY,IAAP,CAAY,eAAZ,EAA6BR,GAAG,CAACS,IAAJ,CAASJ,OAAO,CAACsC,OAAjB,CAA7B;AACA/C,MAAAA,MAAM,CAACY,IAAP;AACAJ,MAAAA,WAAW,CAACC,OAAD,CAAX;AACH;AACJ,GAPI,MAQA,IAAIA,OAAO,CAAC0C,GAAZ,EAAiB;AAClB,QAAI1C,OAAO,CAAC2C,cAAZ,EAA4B;AACxB,aAAO/C,KAAK,CAACiC,MAAN,CAAa,gBAChBlC,GAAG,CAACS,IAAJ,CAAS,oBAAT,CADgB,GAEhB,gCAFgB,GAGhBT,GAAG,CAACS,IAAJ,CAAS,2CAAT,CAHgB,GAIhB,WAJG,CAAP;AAKH;;AACD,WAAOV,oBAAoB,GAAGuC,IAAvB,CAA4B,UAAU1B,QAAV,EAAoB;AACnD,UAAIqC,OAAO,GAAG,EAAd;AACA,aAAO9C,MAAM,CAAC8C,OAAD,EAAU,CACnB;AACIC,QAAAA,IAAI,EAAE,MADV;AAEI9B,QAAAA,IAAI,EAAE,SAFV;AAGI+B,QAAAA,OAAO,EAAE,mCAHb;AAIIC,QAAAA,OAAO,EAAExC,QAAQ,CAACyC,GAAT,CAAcC,CAAD,IAAOA,CAAC,CAACzC,SAAtB,EAAiC0C,IAAjC;AAJb,OADmB,EAOnB;AACIL,QAAAA,IAAI,EAAE,OADV;AAEI9B,QAAAA,IAAI,EAAE,OAFV;AAGI+B,QAAAA,OAAO,EAAE,gEAHb;AAIIK,QAAAA,QAAQ,EAAE,UAAUC,KAAV,EAAiB;AACvB,iBAAOA,KAAK,IAAIA,KAAK,CAACxB,MAAN,GAAe,CAA/B;AACH;AANL,OAPmB,CAAV,CAAN,CAeJK,IAfI,CAeC,YAAY;AAChBjC,QAAAA,OAAO,CAACC,EAAR,CAAWmC,eAAX,CAA2BQ,OAAO,CAACnC,KAAnC,EAA0CmC,OAAO,CAACjC,OAAlD;AACAf,QAAAA,KAAK,CAACyC,iBAAN,CAAwBrC,OAAO,CAACK,WAAhC,EAA6CuC,OAAO,CAACnC,KAArD;AACAlB,QAAAA,MAAM,CAACY,IAAP;AACAZ,QAAAA,MAAM,CAACY,IAAP,CAAY,eAAZ,EAA6BR,GAAG,CAACS,IAAJ,CAASwC,OAAO,CAACnC,KAAjB,CAA7B,EAAsD,KAAtD,EAA6DmC,OAAO,CAACjC,OAAR,GAAkB,GAA/E;AACApB,QAAAA,MAAM,CAACY,IAAP,CAAY,iBAAZ,EAA+BR,GAAG,CAACS,IAAJ,CAASwC,OAAO,CAACnC,KAAjB,IAA0B,IAA1B,GAAiCmC,OAAO,CAACjC,OAAzC,GAAmD,GAAlF;AACH,OArBM,CAAP;AAsBH,KAxBM,CAAP;AAyBH,GAjCI,MAkCA,IAAIX,OAAO,CAACqD,KAAZ,EAAmB;AACpBzD,IAAAA,KAAK,CAACyC,iBAAN,CAAwBrC,OAAO,CAACK,WAAhC,EAA6C,IAA7C;AACAL,IAAAA,OAAO,CAACY,YAAR,GAAuB,IAAvB;AACAZ,IAAAA,OAAO,CAACW,OAAR,GAAkB,IAAlB;AACApB,IAAAA,MAAM,CAACY,IAAP,CAAY,yBAAZ;AACAZ,IAAAA,MAAM,CAACY,IAAP;AACAJ,IAAAA,WAAW,CAACC,OAAD,CAAX;AACH,GAPI,MAQA;AACD,QAAIA,OAAO,CAAC2C,cAAR,IAA0B,CAAClB,OAAO,CAAC6B,MAAR,CAAeC,KAA9C,EAAqD;AACjD,UAAIvD,OAAO,CAACW,OAAZ,EAAqB;AACjBpB,QAAAA,MAAM,CAACY,IAAP,CAAYH,OAAO,CAACW,OAApB;AACA,eAAOX,OAAO,CAACW,OAAf;AACH;;AACD,aAAOf,KAAK,CAACiC,MAAN,CAAa,mBAAb,EAAkC;AAAE2B,QAAAA,IAAI,EAAE;AAAR,OAAlC,CAAP;AACH;;AACD,QAAIxD,OAAO,CAACY,YAAZ,EAA0B;AACtBrB,MAAAA,MAAM,CAACY,IAAP,CAAY,iBAAZ,EAA+BR,GAAG,CAACS,IAAJ,CAASS,IAAT,CAAcb,OAAO,CAACY,YAAR,GAAuB,IAAvB,GAA8BZ,OAAO,CAACW,OAAtC,GAAgD,GAA9D,CAA/B;AACH,KAFD,MAGK,IAAIX,OAAO,CAACW,OAAZ,EAAqB;AACtBpB,MAAAA,MAAM,CAACY,IAAP,CAAY,iBAAZ,EAA+BR,GAAG,CAACS,IAAJ,CAASS,IAAT,CAAcb,OAAO,CAACW,OAAtB,CAA/B;AACH,KAFI,MAGA;AACD,UAAI8C,GAAG,GAAG,gCAAV;;AACA,UAAIzD,OAAO,CAACC,EAAR,CAAWC,WAAf,EAA4B;AACxBuD,QAAAA,GAAG,IAAI,qCAAP;AACH;;AACDlE,MAAAA,MAAM,CAACY,IAAP,CAAYsD,GAAG,GAAG,GAAlB;AACH;;AACDlE,IAAAA,MAAM,CAACY,IAAP;AACAJ,IAAAA,WAAW,CAACC,OAAD,CAAX;AACA,WAAOA,OAAO,CAACW,OAAf;AACH;AACJ,CAlIgB,CAAjB","sourcesContent":["\"use strict\";\nvar { Command } = require(\"../command\");\nvar logger = require(\"../logger\");\nvar requireAuth = require(\"../requireAuth\");\nvar { getFirebaseProject, listFirebaseProjects } = require(\"../management/projects\");\nvar clc = require(\"cli-color\");\nvar utils = require(\"../utils\");\nvar _ = require(\"lodash\");\nvar { prompt } = require(\"../prompt\");\nvar listAliases = function (options) {\n    if (options.rc.hasProjects) {\n        logger.info(\"Project aliases for\", clc.bold(options.projectRoot) + \":\");\n        logger.info();\n        _.forEach(options.rc.projects, function (projectId, alias) {\n            var listing = alias + \" (\" + projectId + \")\";\n            if (options.project === projectId || options.projectAlias === alias) {\n                logger.info(clc.cyan.bold(\"* \" + listing));\n            }\n            else {\n                logger.info(\"  \" + listing);\n            }\n        });\n        logger.info();\n    }\n    logger.info(\"Run\", clc.bold(\"firebase use --add\"), \"to define a new project alias.\");\n};\nvar verifyMessage = function (name) {\n    return \"please verify project \" + clc.bold(name) + \" exists and you have access.\";\n};\nmodule.exports = new Command(\"use [alias_or_project_id]\")\n    .description(\"set an active Firebase project for your working directory\")\n    .option(\"--add\", \"create a new project alias interactively\")\n    .option(\"--alias <name>\", \"create a new alias for the provided project id\")\n    .option(\"--unalias <name>\", \"remove an already created project alias\")\n    .option(\"--clear\", \"clear the active project selection\")\n    .before(requireAuth)\n    .action(function (newActive, options) {\n    var aliasOpt;\n    var i = process.argv.indexOf(\"--alias\");\n    if (i >= 0 && process.argv.length > i + 1) {\n        aliasOpt = process.argv[i + 1];\n    }\n    if (!options.projectRoot) {\n        return utils.reject(clc.bold(\"firebase use\") +\n            \" must be run from a Firebase project directory.\\n\\nRun \" +\n            clc.bold(\"firebase init\") +\n            \" to start a project directory in the current folder.\");\n    }\n    if (newActive) {\n        var aliasedProject = options.rc.get([\"projects\", newActive]);\n        var project = null;\n        const lookupProject = aliasedProject || newActive;\n        return getFirebaseProject(lookupProject)\n            .then((foundProject) => {\n            project = foundProject;\n        })\n            .catch(() => {\n            return utils.reject(\"Invalid project selection, \" + verifyMessage(newActive));\n        })\n            .then(() => {\n            if (aliasOpt) {\n                if (!project) {\n                    return utils.reject(\"Cannot create alias \" + clc.bold(aliasOpt) + \", \" + verifyMessage(newActive));\n                }\n                options.rc.addProjectAlias(aliasOpt, newActive);\n                aliasedProject = newActive;\n                logger.info(\"Created alias\", clc.bold(aliasOpt), \"for\", aliasedProject + \".\");\n            }\n            if (aliasedProject) {\n                if (!project) {\n                    return utils.reject(\"Unable to use alias \" + clc.bold(newActive) + \", \" + verifyMessage(aliasedProject));\n                }\n                utils.makeActiveProject(options.projectRoot, newActive);\n                logger.info(\"Now using alias\", clc.bold(newActive), \"(\" + aliasedProject + \")\");\n            }\n            else if (project) {\n                utils.makeActiveProject(options.projectRoot, newActive);\n                logger.info(\"Now using project\", clc.bold(newActive));\n            }\n            else {\n                return utils.reject(\"Invalid project selection, \" + verifyMessage(newActive));\n            }\n        });\n    }\n    else if (options.unalias) {\n        if (_.has(options.rc.data, [\"projects\", options.unalias])) {\n            options.rc.removeProjectAlias(options.unalias);\n            logger.info(\"Removed alias\", clc.bold(options.unalias));\n            logger.info();\n            listAliases(options);\n        }\n    }\n    else if (options.add) {\n        if (options.nonInteractive) {\n            return utils.reject(\"Cannot run \" +\n                clc.bold(\"firebase use --add\") +\n                \" in non-interactive mode. Use \" +\n                clc.bold(\"firebase use <project_id> --alias <alias>\") +\n                \" instead.\");\n        }\n        return listFirebaseProjects().then(function (projects) {\n            var results = {};\n            return prompt(results, [\n                {\n                    type: \"list\",\n                    name: \"project\",\n                    message: \"Which project do you want to add?\",\n                    choices: projects.map((p) => p.projectId).sort(),\n                },\n                {\n                    type: \"input\",\n                    name: \"alias\",\n                    message: \"What alias do you want to use for this project? (e.g. staging)\",\n                    validate: function (input) {\n                        return input && input.length > 0;\n                    },\n                },\n            ]).then(function () {\n                options.rc.addProjectAlias(results.alias, results.project);\n                utils.makeActiveProject(options.projectRoot, results.alias);\n                logger.info();\n                logger.info(\"Created alias\", clc.bold(results.alias), \"for\", results.project + \".\");\n                logger.info(\"Now using alias\", clc.bold(results.alias) + \" (\" + results.project + \")\");\n            });\n        });\n    }\n    else if (options.clear) {\n        utils.makeActiveProject(options.projectRoot, null);\n        options.projectAlias = null;\n        options.project = null;\n        logger.info(\"Cleared active project.\");\n        logger.info();\n        listAliases(options);\n    }\n    else {\n        if (options.nonInteractive || !process.stdout.isTTY) {\n            if (options.project) {\n                logger.info(options.project);\n                return options.project;\n            }\n            return utils.reject(\"No active project\", { exit: 1 });\n        }\n        if (options.projectAlias) {\n            logger.info(\"Active Project:\", clc.bold.cyan(options.projectAlias + \" (\" + options.project + \")\"));\n        }\n        else if (options.project) {\n            logger.info(\"Active Project:\", clc.bold.cyan(options.project));\n        }\n        else {\n            var msg = \"No project is currently active\";\n            if (options.rc.hasProjects) {\n                msg += \", and no aliases have been created.\";\n            }\n            logger.info(msg + \".\");\n        }\n        logger.info();\n        listAliases(options);\n        return options.project;\n    }\n});\n"]},"metadata":{},"sourceType":"script"}
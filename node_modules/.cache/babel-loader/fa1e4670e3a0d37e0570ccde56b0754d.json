{"ast":null,"code":"\"use strict\";\n\nvar _ = require(\"lodash\");\n\nvar utils = require(\"./utils\");\n\nvar clc = require(\"cli-color\");\n\nvar Config = require(\"./config\");\n\nvar _require = require(\"./error\"),\n    FirebaseError = _require.FirebaseError;\n\nvar logger = require(\"./logger\");\n\nmodule.exports = function (options) {\n  return new Promise(function (resolve, reject) {\n    var src = options.config._src;\n    var legacyKeys = Config.LEGACY_HOSTING_KEYS;\n\n    var hasLegacyKeys = _.reduce(legacyKeys, function (result, key) {\n      return result || _.has(src, key);\n    }, false);\n\n    if (hasLegacyKeys && _.has(src, [\"hosting\"])) {\n      utils.logWarning(clc.bold.yellow(\"hosting: \") + \"We found a \" + clc.bold(\"hosting\") + \" key inside \" + clc.bold(\"firebase.json\") + \" as well as hosting configuration keys that are not nested inside the \" + clc.bold(\"hosting\") + \" key.\");\n      logger.info(\"\\n\\nPlease run \" + clc.bold(\"firebase tools:migrate\") + \" to fix this issue.\");\n      logger.info(\"Please note that this will overwrite any configuration keys nested inside the \" + clc.bold(\"hosting\") + \" key with configuration keys at the root level of \" + clc.bold(\"firebase.json.\"));\n      reject(new FirebaseError(\"Hosting key and legacy hosting keys are both present in firebase.json.\"));\n    } else {\n      resolve();\n    }\n  });\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/lib/checkDupHostingKeys.js"],"names":["_","require","utils","clc","Config","FirebaseError","logger","module","exports","options","Promise","resolve","reject","src","config","_src","legacyKeys","LEGACY_HOSTING_KEYS","hasLegacyKeys","reduce","result","key","has","logWarning","bold","yellow","info"],"mappings":"AAAA;;AACA,IAAIA,CAAC,GAAGC,OAAO,CAAC,QAAD,CAAf;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,SAAD,CAAnB;;AACA,IAAIE,GAAG,GAAGF,OAAO,CAAC,WAAD,CAAjB;;AACA,IAAIG,MAAM,GAAGH,OAAO,CAAC,UAAD,CAApB;;eACwBA,OAAO,CAAC,SAAD,C;IAAzBI,a,YAAAA,a;;AACN,IAAIC,MAAM,GAAGL,OAAO,CAAC,UAAD,CAApB;;AACAM,MAAM,CAACC,OAAP,GAAiB,UAAUC,OAAV,EAAmB;AAChC,SAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC1C,QAAIC,GAAG,GAAGJ,OAAO,CAACK,MAAR,CAAeC,IAAzB;AACA,QAAIC,UAAU,GAAGZ,MAAM,CAACa,mBAAxB;;AACA,QAAIC,aAAa,GAAGlB,CAAC,CAACmB,MAAF,CAASH,UAAT,EAAqB,UAAUI,MAAV,EAAkBC,GAAlB,EAAuB;AAC5D,aAAOD,MAAM,IAAIpB,CAAC,CAACsB,GAAF,CAAMT,GAAN,EAAWQ,GAAX,CAAjB;AACH,KAFmB,EAEjB,KAFiB,CAApB;;AAGA,QAAIH,aAAa,IAAIlB,CAAC,CAACsB,GAAF,CAAMT,GAAN,EAAW,CAAC,SAAD,CAAX,CAArB,EAA8C;AAC1CX,MAAAA,KAAK,CAACqB,UAAN,CAAiBpB,GAAG,CAACqB,IAAJ,CAASC,MAAT,CAAgB,WAAhB,IACb,aADa,GAEbtB,GAAG,CAACqB,IAAJ,CAAS,SAAT,CAFa,GAGb,cAHa,GAIbrB,GAAG,CAACqB,IAAJ,CAAS,eAAT,CAJa,GAKb,wEALa,GAMbrB,GAAG,CAACqB,IAAJ,CAAS,SAAT,CANa,GAOb,OAPJ;AAQAlB,MAAAA,MAAM,CAACoB,IAAP,CAAY,oBAAoBvB,GAAG,CAACqB,IAAJ,CAAS,wBAAT,CAApB,GAAyD,qBAArE;AACAlB,MAAAA,MAAM,CAACoB,IAAP,CAAY,mFACRvB,GAAG,CAACqB,IAAJ,CAAS,SAAT,CADQ,GAER,oDAFQ,GAGRrB,GAAG,CAACqB,IAAJ,CAAS,gBAAT,CAHJ;AAIAZ,MAAAA,MAAM,CAAC,IAAIP,aAAJ,CAAkB,wEAAlB,CAAD,CAAN;AACH,KAfD,MAgBK;AACDM,MAAAA,OAAO;AACV;AACJ,GAzBM,CAAP;AA0BH,CA3BD","sourcesContent":["\"use strict\";\nvar _ = require(\"lodash\");\nvar utils = require(\"./utils\");\nvar clc = require(\"cli-color\");\nvar Config = require(\"./config\");\nvar { FirebaseError } = require(\"./error\");\nvar logger = require(\"./logger\");\nmodule.exports = function (options) {\n    return new Promise(function (resolve, reject) {\n        var src = options.config._src;\n        var legacyKeys = Config.LEGACY_HOSTING_KEYS;\n        var hasLegacyKeys = _.reduce(legacyKeys, function (result, key) {\n            return result || _.has(src, key);\n        }, false);\n        if (hasLegacyKeys && _.has(src, [\"hosting\"])) {\n            utils.logWarning(clc.bold.yellow(\"hosting: \") +\n                \"We found a \" +\n                clc.bold(\"hosting\") +\n                \" key inside \" +\n                clc.bold(\"firebase.json\") +\n                \" as well as hosting configuration keys that are not nested inside the \" +\n                clc.bold(\"hosting\") +\n                \" key.\");\n            logger.info(\"\\n\\nPlease run \" + clc.bold(\"firebase tools:migrate\") + \" to fix this issue.\");\n            logger.info(\"Please note that this will overwrite any configuration keys nested inside the \" +\n                clc.bold(\"hosting\") +\n                \" key with configuration keys at the root level of \" +\n                clc.bold(\"firebase.json.\"));\n            reject(new FirebaseError(\"Hosting key and legacy hosting keys are both present in firebase.json.\"));\n        }\n        else {\n            resolve();\n        }\n    });\n};\n"]},"metadata":{},"sourceType":"script"}
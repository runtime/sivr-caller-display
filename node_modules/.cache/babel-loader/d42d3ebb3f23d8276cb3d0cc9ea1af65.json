{"ast":null,"code":"\"use strict\";\n\nvar spawn = require(\"cross-spawn\");\n\nvar logger = require(\"../../../logger\");\n\nvar _require = require(\"../../../prompt\"),\n    prompt = _require.prompt;\n\nexports.askInstallDependencies = function (setup, config) {\n  return prompt(setup.functions, [{\n    name: \"npm\",\n    type: \"confirm\",\n    message: \"Do you want to install dependencies with npm now?\",\n    default: true\n  }]).then(function () {\n    if (setup.functions.npm) {\n      return new Promise(function (resolve) {\n        var installer = spawn(\"npm\", [\"install\"], {\n          cwd: config.projectDir + \"/functions\",\n          stdio: \"inherit\"\n        });\n        installer.on(\"error\", function (err) {\n          logger.debug(err.stack);\n        });\n        installer.on(\"close\", function (code) {\n          if (code === 0) {\n            return resolve();\n          }\n\n          logger.info();\n          logger.error(\"NPM install failed, continuing with Firebase initialization...\");\n          return resolve();\n        });\n      });\n    }\n  });\n};","map":{"version":3,"sources":["/Users/Erik.Kroha1/Jobs/Verizon/Talk Home/sivr-caller-display/node_modules/firebase-tools/lib/init/features/functions/npm-dependencies.js"],"names":["spawn","require","logger","prompt","exports","askInstallDependencies","setup","config","functions","name","type","message","default","then","npm","Promise","resolve","installer","cwd","projectDir","stdio","on","err","debug","stack","code","info","error"],"mappings":"AAAA;;AACA,IAAIA,KAAK,GAAGC,OAAO,CAAC,aAAD,CAAnB;;AACA,IAAIC,MAAM,GAAGD,OAAO,CAAC,iBAAD,CAApB;;eACiBA,OAAO,CAAC,iBAAD,C;IAAlBE,M,YAAAA,M;;AACNC,OAAO,CAACC,sBAAR,GAAiC,UAAUC,KAAV,EAAiBC,MAAjB,EAAyB;AACtD,SAAOJ,MAAM,CAACG,KAAK,CAACE,SAAP,EAAkB,CAC3B;AACIC,IAAAA,IAAI,EAAE,KADV;AAEIC,IAAAA,IAAI,EAAE,SAFV;AAGIC,IAAAA,OAAO,EAAE,mDAHb;AAIIC,IAAAA,OAAO,EAAE;AAJb,GAD2B,CAAlB,CAAN,CAOJC,IAPI,CAOC,YAAY;AAChB,QAAIP,KAAK,CAACE,SAAN,CAAgBM,GAApB,EAAyB;AACrB,aAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;AAClC,YAAIC,SAAS,GAAGjB,KAAK,CAAC,KAAD,EAAQ,CAAC,SAAD,CAAR,EAAqB;AACtCkB,UAAAA,GAAG,EAAEX,MAAM,CAACY,UAAP,GAAoB,YADa;AAEtCC,UAAAA,KAAK,EAAE;AAF+B,SAArB,CAArB;AAIAH,QAAAA,SAAS,CAACI,EAAV,CAAa,OAAb,EAAsB,UAAUC,GAAV,EAAe;AACjCpB,UAAAA,MAAM,CAACqB,KAAP,CAAaD,GAAG,CAACE,KAAjB;AACH,SAFD;AAGAP,QAAAA,SAAS,CAACI,EAAV,CAAa,OAAb,EAAsB,UAAUI,IAAV,EAAgB;AAClC,cAAIA,IAAI,KAAK,CAAb,EAAgB;AACZ,mBAAOT,OAAO,EAAd;AACH;;AACDd,UAAAA,MAAM,CAACwB,IAAP;AACAxB,UAAAA,MAAM,CAACyB,KAAP,CAAa,gEAAb;AACA,iBAAOX,OAAO,EAAd;AACH,SAPD;AAQH,OAhBM,CAAP;AAiBH;AACJ,GA3BM,CAAP;AA4BH,CA7BD","sourcesContent":["\"use strict\";\nvar spawn = require(\"cross-spawn\");\nvar logger = require(\"../../../logger\");\nvar { prompt } = require(\"../../../prompt\");\nexports.askInstallDependencies = function (setup, config) {\n    return prompt(setup.functions, [\n        {\n            name: \"npm\",\n            type: \"confirm\",\n            message: \"Do you want to install dependencies with npm now?\",\n            default: true,\n        },\n    ]).then(function () {\n        if (setup.functions.npm) {\n            return new Promise(function (resolve) {\n                var installer = spawn(\"npm\", [\"install\"], {\n                    cwd: config.projectDir + \"/functions\",\n                    stdio: \"inherit\",\n                });\n                installer.on(\"error\", function (err) {\n                    logger.debug(err.stack);\n                });\n                installer.on(\"close\", function (code) {\n                    if (code === 0) {\n                        return resolve();\n                    }\n                    logger.info();\n                    logger.error(\"NPM install failed, continuing with Firebase initialization...\");\n                    return resolve();\n                });\n            });\n        }\n    });\n};\n"]},"metadata":{},"sourceType":"script"}